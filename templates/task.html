{% extends "base.html" %}
{% block links %}
    <script type="text/javascript" src="/static/scripts/task.js"></script>
    <link type="text/css" href="/static/css/colorbox.css" rel="stylesheet"/>
    <script type="text/javascript" src="/static/scripts/jquery.ui.datepicker-ru.js"></script>
    <script type="text/javascript" src="/static/scripts/jquery.colorbox.js"></script>
{% endblock %}
{% block title %}{{ task.chapter.shortName }} {% if task.final %}ЗАЧЕТ {% endif %} {% endblock %}
{% block loader %}timedCount();{% endblock %}
{% block main %}
    <div class="row">
        <div class="span1">&nbsp;</div>
        <div class="span10">
            <table cellpadding="0" cellspacing="0" align="center" width="100%">
                <tr>
                    <td id="tictacdisplay" align="left" width="150" style="font-size: smaller;"></td>
                    <td align="left" width="600">
                        <div class="btn-toolbar">
                            <div class="btn-group">
                                {% for item in list %}
                                    <a class="btn {% if task == item %}btn-info{% endif %}" href="/chapter/{{ item.chapter_id }}/task/{{ forloop.counter }}">
                                        {{ forloop.counter }}
                                    </a>
                                    {% if forloop.counter|divisibleby:20  and list|length > 20 %}
                                        </div><div class="btn-group">
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
            <h2>Задание {{ next|add:-1 }}:</h2>
        </div>
        <div class="span1">&nbsp;</div>
    </div>
    <div class="row">
        <div class="span1">&nbsp;</div>
        <div class="span10">
            <p class="tasktext">{{ task.description|safe }}</p>
            <form method="POST" action="/chapter/{{ task.chapter_id }}/task/{{ next }}/answer/" class="options">
                {% if task.option_set.all|length > 1 %}<p class="tasktext">Варианты ответов</p>{% else %}<p>Ответ</p>{% endif %}
                {% for item in task.option_set.all %}
                    <div>
                        {% if type == -1 %}
                            <input type="text" value="" name="option"/>
                        {% else %}
                            {% if type == 1 %}
                                <input class="tasktext pull-left" type="radio" value="{{item.id}}" name="option" title="{{item}}"/><span class="tasktext">{{item|safe}}</span>
                            {% else %}
                                <input class="tasktext pull-left" type="checkbox" value="{{item.id}}" name="option" title="{{item}}"/><span class="tasktext">{{item|safe}}</span>
                            {% endif %}
                        {% endif %}
                    </div>
                {% endfor %}
                <div class="clear">&nbsp;</div>
                <div>
                    <input type="submit" class="btn btn-success" value="{% if next > list|length %}Закончить{% else %}Следующий{% endif %}"  onclick="return validateAnswer()">
                    <input type="submit" class="btn btn-danger pull-right" value="Сдаюсь" name="giveup">
                    <input type="hidden" name="tictac" id="tictac" value="{{ tictac }}">
                    <input type="hidden" name="limit" id="limit" value="{{ limit }}">
                </div>
            </form>
        </div>
        <div class="span1">&nbsp;</div>
    </div>
    <script type="text/javascript">
        $(function() {
            $( "input:submit" ).button();
        });
    </script>
{% endblock %}